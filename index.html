<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="180966977438-fqqes4kqp6dpr502v0btgnvt00f62u97.apps.googleusercontent.com">
    <title>Cab-Ease</title>
    <link href="https://fonts.googleapis.com/css?family=Chewy" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
  </head>
  <body>
    <header class="header">
      <h2 class="title">Cab-Ease</h2>
    </header>
    <main>
      <div class="g-signin2" data-onsuccess="onSignIn"></div>
    </main>
    <iframe src="https://script.google.com/macros/s/AKfycbymClKxdA28USgKIDxrxPsWFX5NNcHeuoWGF3pGjDdP63ncWzk/exec" frameborder="0"></iframe>
    <script>
      function onSignIn(googleUser) {
         var profile = googleUser.getBasicProfile();
         document.getElementsByClassName('g-signin2')[0].style.display = 'none';

         var p = document.createElement('p');
         p.innerHTML = profile.getEmail();
         var button = document.createElement('button');
         button.setOption('type','button');
         button.innerHTML = 'Log Out';
         button.setOption('onclick','signOut()');

         document.getElementsByTagName('main')[0].appendChild(p);
         document.getElementsByTagName('main')[0].appendChild(button);
      }

      function signOut() {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
          location.reload();
        });
      }
    </script>
  </body>
</html>
